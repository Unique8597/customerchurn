$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
type: command
name: customer-churn-training
display_name: "Customer Churn Training Job"

# Directory containing train.py and dependencies
code: ../src

# ---------------------------
# Environment (Python + dependencies)
# ---------------------------
environment: 
  $schema: https://azuremlschemas.azureedge.net/latest/environment.schema.json
  name: customer-churn-env
  image: mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04:latest
  conda_file: conda.yaml
# ---------------------------
# Compute target
# ---------------------------
compute: cpu-cluster

resources:
  instance_count: 3
# ---------------------------
# Command to run
# ---------------------------
command: python model/train.py

# ---------------------------
# Outputs
# ---------------------------
outputs:
  artifacts:
    type: uri_folder
    path: azureml://datastores/workspaceblobstore/paths/artifacts/